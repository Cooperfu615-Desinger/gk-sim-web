<!DOCTYPE html>
<html lang="zh-Hant">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>金庫神偷｜RTP 模擬器（含道具／曲線破壞者）</title>
  <style>
    body { font-family: Arial, sans-serif; background: #0b1020; color: #e8ecf3; }
    .wrap { max-width: 1200px; margin: auto; padding: 20px; }
    .card { background: #141a2d; padding: 20px; border-radius: 12px; margin-bottom: 20px; }
    .row { display: flex; gap: 10px; flex-wrap: wrap; }
    label { display: block; margin: 5px 0; color: #a9b2c7; }
    input, textarea { width: 100%; padding: 8px; border-radius: 6px; border: 1px solid #2a3553; background: #0d1326; color: #fff; }
    button { padding: 10px 16px; border: none; border-radius: 6px; cursor: pointer; }
    button.primary { background: #4cc9f0; color: #07111f; }
    button.secondary { background: #2a3553; color: #e8ecf3; }
    h1 { margin-top: 0; }
    .table { width: 100%; border-collapse: collapse; }
    .table th, .table td { border: 1px solid #2a3553; padding: 6px; }
    .kpi { font-size: 20px; font-weight: bold; }
  </style>
</head>
<body>
  <div class="wrap">
    <div class="card">
      <h1>金庫神偷｜RTP 模擬器</h1>
      <p>此工具用於測試獎勵曲線、風險曲線與道具/曲線破壞者對 RTP 的影響。</p>
      <div class="row">
        <button id="btnCalibrate" class="primary">自動校準（基礎＋上限）</button>
        <button id="btnExportSpec" class="secondary">匯出規格 CSV</button>
        <button id="btnExportAlerts" class="secondary">匯出警戒 CSV</button>
        <button id="btnRunAdv" class="primary">執行進階模擬</button>
        <button id="btnCalibAdv" class="secondary">進階自動校準到 96%</button>
        <button id="btnReadme" class="secondary">開啟使用說明 (README)</button>
      </div>
    </div>

    <div class="card">
      <h2>輸入設定</h2>
      <label>目標 RTP</label>
      <input id="inpTarget" type="number" value="0.96" step="0.001" />
      <label>Step50 成功率</label>
      <input id="inpS50" type="number" value="0.7" step="0.01" min="0" max="1" />
      <label>金額上限（$）</label>
      <input id="inpMoneyCap" type="number" value="50000" step="100" />
      <label>倍率上限（x）</label>
      <input id="inpMultCap" type="number" value="5000" step="100" />
      <label>50 步倍率（逗號分隔）</label>
      <textarea id="inpRewards"></textarea>
      <label>基準失敗率 %（49 項）</label>
      <textarea id="inpBaseFail"></textarea>
    </div>

    <div class="card">
      <h2>進階模擬（道具／曲線破壞者）</h2>
      <label>下注額（$）</label>
      <input id="inpBet" type="number" value="1" step="0.1" />
      <label>模擬局數</label>
      <input id="inpSims" type="number" value="20000" step="1000" />
      <label>λ1（步 1–30）</label>
      <input id="inpLam1" type="number" value="1.0" step="0.01" />
      <label>λ2（步 31–40）</label>
      <input id="inpLam2" type="number" value="1.12" step="0.01" />
      <label>λ3（步 41–50）</label>
      <input id="inpLam3" type="number" value="2.5" step="0.01" />
    </div>

    <div class="card">
      <h2>校準結果</h2>
      <div id="calibKPI" class="row"></div>
      <table class="table" id="tblSpec"></table>
    </div>
  </div>

  <script>
    function openReadme(){ 
      fetch('README.md')
        .then(r=>r.text())
        .then(txt=>{ 
          const w=window.open(); 
          w.document.write('<pre>'+txt+'</pre>') 
        })
        .catch(err=>alert('找不到 README.md'));
    }
    document.addEventListener('DOMContentLoaded', ()=>{
      document.getElementById('btnReadme').onclick=openReadme;
      document.getElementById('btnCalibrate').onclick=()=>alert('執行校準...');
      document.getElementById('btnRunAdv').onclick=()=>alert('執行進階模擬...');
      document.getElementById('btnCalibAdv').onclick=()=>alert('進階自動校準...');
      document.getElementById('btnExportSpec').onclick=()=>alert('匯出規格 CSV...');
      document.getElementById('btnExportAlerts').onclick=()=>alert('匯出警戒 CSV...');
    });
  </script>
</body>
</html>
